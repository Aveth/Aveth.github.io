<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8">

  <title>Sample post message</title>
  
</head>

<body>
  <script>

	function receiveMessage(event)
	{
	
		console.log(event.data)

	 	event.source.postMessage("hi there yourself!  the secret response " +
		                   "is: rheeeeet!",
		                   event.origin);
	}
	  	
  	var channel = new MessageChannel()

	console.log("sending messages")

  	window.parent.postMessage("window with 3 params on port 2",  "*", [channel.port2]);
  	window.parent.postMessage("window with 2 params on port 2", [channel.port2]);

	window.parent.postMessage("window with 3 params on port 1",  "*", [channel.port1]);
  	window.parent.postMessage("window with 2 params on port 1", [channel.port1]);	

	window.addEventListener("message", receiveMessage, false);


  </script>
</body>
</html>
